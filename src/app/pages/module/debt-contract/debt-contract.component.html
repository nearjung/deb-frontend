<div class="container">
    <div class="row">
        <div class="col-12">
            <mat-form-field appearance="standard">
                <mat-label>ค้นหา</mat-label>
                <input matInput (keyup)="applyFilter($event)" placeholder="กรุณากรอกข้อมูลที่ต้องการค้นหา" #input>
            </mat-form-field>
        </div>
    </div>
    <table class="mat-table mat-elevation-z8 width-full">
        <tr class="mat-header-row">
            <th class="mat-header-cell"><mat-checkbox [(ngModel)]="checked" (click)="checkAll()" color="primary"></mat-checkbox></th>
            <th class="mat-header-cell">เลขที่สัญญา</th>
            <th class="mat-header-cell">รายการ</th>
            <th class="mat-header-cell">ชื่อลูกค้า</th>
            <th class="mat-header-cell">ปดว.จ่ายงาน</th>
            <th class="mat-header-cell">จำนวนผู้กู้ร่วม</th>
            <th class="mat-header-cell">ยอดรวมทั้งสิ้น</th>
            <th class="mat-header-cell">ยอดสรุปที่จะชำระ</th>
            <th class="mat-header-cell">ยอดคงเหลือที่ต้องจ่าย</th>
            <th class="mat-header-cell">
                <button *ngIf="btnCreate" (click)="openManageModal()" mat-flat-button color="primary">
                    <mat-icon>add</mat-icon> เพิ่มสัญญา
                </button>
                
                <button mat-icon-button *ngIf="!btnCreate" color="primary" (click)="openManageTraceModal(debtList, 'work')">
                    <mat-icon>drive_file_move</mat-icon>
                </button>
                <button mat-icon-button *ngIf="!btnCreate" color="warn">
                    <mat-icon>delete</mat-icon>
                </button>
            </th>
        </tr>
        <tr class="mat-row" *ngFor="let debt of debtList; index as number">
            <td class="mat-cell"><mat-checkbox [checked]="debt.checked" (change)="debt.checked = (debt.checked) ? false : true; check()" color="primary"></mat-checkbox></td>
            <td class="mat-cell">{{ debt.contractNumber }}</td>
            <td class="mat-cell">{{ debt.product }}</td>
            <td class="mat-cell">{{ debt.customerName }}</td>
            <td class="mat-cell">{{ debt.paymentDate }}</td>
            <td class="mat-cell">{{ debt.numberOfCoBorrowers }}</td>
            <td class="mat-cell">{{ debt.totalAmount | number : '1.2-2' }}</td>
            <td class="mat-cell">{{ debt.pay | number : '1.2-2' }}</td>
            <td class="mat-cell">{{ debt.balance | number : '1.2-2' }}</td>
            <td class="mat-cell">
                <button (click)="openManageTraceModal(debt, 'assign')" mat-icon-button color="primary">
                    <mat-icon>person</mat-icon>
                </button>
                <button (click)="openManageModal(debt)" mat-icon-button color="primary">
                    <mat-icon>edit</mat-icon>
                </button>
                <button mat-icon-button color="warn">
                    <mat-icon>delete</mat-icon>
                </button>
            </td>
        </tr>
    </table>
</div>